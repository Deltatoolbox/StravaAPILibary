<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
      <title>Examples | StravaAPILibary Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Examples | StravaAPILibary Documentation ">
      
      <meta name="description" content="Practical examples and real-world scenarios for StravaAPILibary">
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/Deltatoolbox/StravaAPILibary/blob/master/docs/articles/examples.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="default" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="StravaAPILibary">
            StravaAPILibary
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="examples">Examples</h1>

<p>This page contains practical examples and real-world scenarios showing how to use StravaAPILibary effectively.</p>
<h2 id="-basic-examples">üöÄ Basic Examples</h2>
<h3 id="get-athlete-profile">Get Athlete Profile</h3>
<pre><code class="lang-csharp">using StravaAPILibary.API;

// Get the authenticated athlete's profile
var athlete = await Athletes.GetAuthenticatedAthleteProfileAsync(accessToken);

Console.WriteLine($&quot;Name: {athlete.FirstName} {athlete.LastName}&quot;);
Console.WriteLine($&quot;Location: {athlete.City}, {athlete.Country}&quot;);
Console.WriteLine($&quot;Followers: {athlete.FollowerCount}&quot;);
Console.WriteLine($&quot;Following: {athlete.FriendCount}&quot;);
</code></pre>
<h3 id="get-recent-activities">Get Recent Activities</h3>
<pre><code class="lang-csharp">// Get the last 10 activities
var activities = await Activities.GetAthletesActivitiesAsync(accessToken, perPage: 10);

foreach (var activity in activities)
{
    Console.WriteLine($&quot;Activity: {activity.Name}&quot;);
    Console.WriteLine($&quot;Type: {activity.Type}&quot;);
    Console.WriteLine($&quot;Distance: {activity.Distance:F0}m&quot;);
    Console.WriteLine($&quot;Duration: {TimeSpan.FromSeconds(activity.MovingTime)}&quot;);
    Console.WriteLine($&quot;Date: {activity.StartDate}&quot;);
    Console.WriteLine(&quot;---&quot;);
}
</code></pre>
<h3 id="get-activity-details">Get Activity Details</h3>
<pre><code class="lang-csharp">// Get detailed information about a specific activity
long activityId = 123456789;
var activity = await Activities.GetActivityByIdAsync(accessToken, activityId);

Console.WriteLine($&quot;Activity: {activity.Name}&quot;);
Console.WriteLine($&quot;Description: {activity.Description}&quot;);
Console.WriteLine($&quot;Distance: {activity.Distance:F0}m&quot;);
Console.WriteLine($&quot;Elevation Gain: {activity.TotalElevationGain:F0}m&quot;);
Console.WriteLine($&quot;Average Speed: {activity.AverageSpeed:F2}m/s&quot;);
Console.WriteLine($&quot;Max Speed: {activity.MaxSpeed:F2}m/s&quot;);
</code></pre>
<h2 id="-data-analysis-examples">üìä Data Analysis Examples</h2>
<h3 id="calculate-weekly-distance">Calculate Weekly Distance</h3>
<pre><code class="lang-csharp">public async Task&lt;double&gt; GetWeeklyDistanceAsync(string accessToken)
{
    // Get activities from the last 7 days
    int after = (int)DateTimeOffset.UtcNow.AddDays(-7).ToUnixTimeSeconds();
    var activities = await Activities.GetAthletesActivitiesAsync(accessToken, after: after);
    
    double totalDistance = activities.Sum(a =&gt; a.Distance);
    return totalDistance; // Returns distance in meters
}

// Usage
double weeklyDistance = await GetWeeklyDistanceAsync(accessToken);
Console.WriteLine($&quot;Weekly Distance: {weeklyDistance / 1000:F1}km&quot;);
</code></pre>
<h3 id="find-personal-records">Find Personal Records</h3>
<pre><code class="lang-csharp">public async Task&lt;List&lt;SummaryActivity&gt;&gt; FindPersonalRecordsAsync(string accessToken)
{
    var activities = await Activities.GetAthletesActivitiesAsync(accessToken, perPage: 200);
    
    var personalRecords = new List&lt;SummaryActivity&gt;();
    
    // Find fastest 5k
    var fastest5k = activities
        .Where(a =&gt; a.Distance &gt;= 5000 &amp;&amp; a.Distance &lt;= 5100)
        .OrderBy(a =&gt; a.MovingTime)
        .FirstOrDefault();
    
    if (fastest5k != null)
    {
        personalRecords.Add(fastest5k);
    }
    
    // Find longest distance
    var longestDistance = activities
        .OrderByDescending(a =&gt; a.Distance)
        .FirstOrDefault();
    
    if (longestDistance != null)
    {
        personalRecords.Add(longestDistance);
    }
    
    return personalRecords;
}
</code></pre>
<h3 id="activity-statistics">Activity Statistics</h3>
<pre><code class="lang-csharp">public class ActivityStats
{
    public int TotalActivities { get; set; }
    public double TotalDistance { get; set; }
    public TimeSpan TotalTime { get; set; }
    public double AverageDistance { get; set; }
    public Dictionary&lt;string, int&gt; ActivityTypes { get; set; } = new();
}

public async Task&lt;ActivityStats&gt; GetActivityStatsAsync(string accessToken, int days = 30)
{
    int after = (int)DateTimeOffset.UtcNow.AddDays(-days).ToUnixTimeSeconds();
    var activities = await Activities.GetAthletesActivitiesAsync(accessToken, after: after);
    
    var stats = new ActivityStats
    {
        TotalActivities = activities.Count,
        TotalDistance = activities.Sum(a =&gt; a.Distance),
        TotalTime = TimeSpan.FromSeconds(activities.Sum(a =&gt; a.MovingTime))
    };
    
    stats.AverageDistance = stats.TotalDistance / stats.TotalActivities;
    
    // Count activity types
    foreach (var activity in activities)
    {
        if (stats.ActivityTypes.ContainsKey(activity.Type))
        {
            stats.ActivityTypes[activity.Type]++;
        }
        else
        {
            stats.ActivityTypes[activity.Type] = 1;
        }
    }
    
    return stats;
}
</code></pre>
<h2 id="-route-and-segment-examples">üó∫Ô∏è Route and Segment Examples</h2>
<h3 id="get-route-information">Get Route Information</h3>
<pre><code class="lang-csharp">public async Task&lt;Route&gt; GetRouteDetailsAsync(string accessToken, long routeId)
{
    var route = await Routes.GetRouteByIdAsync(accessToken, routeId);
    
    Console.WriteLine($&quot;Route: {route.Name}&quot;);
    Console.WriteLine($&quot;Distance: {route.Distance:F0}m&quot;);
    Console.WriteLine($&quot;Elevation Gain: {route.ElevationGain:F0}m&quot;);
    Console.WriteLine($&quot;Type: {route.Type}&quot;);
    Console.WriteLine($&quot;Sub Type: {route.SubType}&quot;);
    
    return route;
}
</code></pre>
<h3 id="find-segments-near-location">Find Segments Near Location</h3>
<pre><code class="lang-csharp">public async Task&lt;List&lt;ExplorerSegment&gt;&gt; FindSegmentsNearbyAsync(
    string accessToken, 
    double latitude, 
    double longitude, 
    double radius = 1000)
{
    var segments = await Segments.ExploreSegmentsAsync(
        accessToken, 
        bounds: $&quot;{latitude},{longitude},{latitude},{longitude}&quot;,
        activityType: &quot;running&quot;,
        minCat: 0,
        maxCat: 5
    );
    
    return segments.Segments
        .Where(s =&gt; s.Distance &lt;= radius)
        .OrderBy(s =&gt; s.Distance)
        .ToList();
}
</code></pre>
<h2 id="-social-features">üë• Social Features</h2>
<h3 id="get-athletes-followers">Get Athlete's Followers</h3>
<pre><code class="lang-csharp">public async Task&lt;List&lt;SummaryAthlete&gt;&gt; GetFollowersAsync(string accessToken)
{
    var followers = await Athletes.GetAuthenticatedAthleteFollowersAsync(accessToken);
    
    foreach (var follower in followers)
    {
        Console.WriteLine($&quot;Follower: {follower.FirstName} {follower.LastName}&quot;);
        Console.WriteLine($&quot;Username: {follower.Username}&quot;);
        Console.WriteLine($&quot;Location: {follower.City}&quot;);
        Console.WriteLine(&quot;---&quot;);
    }
    
    return followers;
}
</code></pre>
<h3 id="get-club-activities">Get Club Activities</h3>
<pre><code class="lang-csharp">public async Task&lt;List&lt;ClubActivity&gt;&gt; GetClubActivitiesAsync(string accessToken, long clubId)
{
    var activities = await Clubs.GetClubActivitiesByIdAsync(accessToken, clubId);
    
    foreach (var activity in activities)
    {
        Console.WriteLine($&quot;Athlete: {activity.Athlete.FirstName} {activity.Athlete.LastName}&quot;);
        Console.WriteLine($&quot;Activity: {activity.Name}&quot;);
        Console.WriteLine($&quot;Distance: {activity.Distance:F0}m&quot;);
        Console.WriteLine($&quot;Type: {activity.Type}&quot;);
        Console.WriteLine(&quot;---&quot;);
    }
    
    return activities;
}
</code></pre>
<h2 id="-performance-tracking">üìà Performance Tracking</h2>
<h3 id="track-progress-over-time">Track Progress Over Time</h3>
<pre><code class="lang-csharp">public class PerformanceTracker
{
    public async Task&lt;Dictionary&lt;string, List&lt;double&gt;&gt;&gt; TrackProgressAsync(
        string accessToken, 
        int weeks = 12)
    {
        var weeklyDistances = new Dictionary&lt;string, List&lt;double&gt;&gt;();
        
        for (int week = 0; week &lt; weeks; week++)
        {
            var startDate = DateTimeOffset.UtcNow.AddDays(-7 * (week + 1));
            var endDate = startDate.AddDays(7);
            
            int after = (int)startDate.ToUnixTimeSeconds();
            int before = (int)endDate.ToUnixTimeSeconds();
            
            var activities = await Activities.GetAthletesActivitiesAsync(
                accessToken, 
                after: after, 
                before: before
            );
            
            var weekDistance = activities.Sum(a =&gt; a.Distance) / 1000; // Convert to km
            var weekKey = startDate.ToString(&quot;yyyy-MM-dd&quot;);
            
            weeklyDistances[weekKey] = new List&lt;double&gt; { weekDistance };
        }
        
        return weeklyDistances;
    }
}
</code></pre>
<h3 id="compare-performance">Compare Performance</h3>
<pre><code class="lang-csharp">public async Task&lt;PerformanceComparison&gt; ComparePerformanceAsync(
    string accessToken, 
    DateTime startDate, 
    DateTime endDate)
{
    int after = (int)startDate.ToUnixTimeSeconds();
    int before = (int)endDate.ToUnixTimeSeconds();
    
    var activities = await Activities.GetAthletesActivitiesAsync(
        accessToken, 
        after: after, 
        before: before
    );
    
    var comparison = new PerformanceComparison
    {
        TotalActivities = activities.Count,
        TotalDistance = activities.Sum(a =&gt; a.Distance),
        TotalTime = TimeSpan.FromSeconds(activities.Sum(a =&gt; a.MovingTime)),
        AverageSpeed = activities.Average(a =&gt; a.AverageSpeed),
        MaxSpeed = activities.Max(a =&gt; a.MaxSpeed),
        TotalElevationGain = activities.Sum(a =&gt; a.TotalElevationGain)
    };
    
    return comparison;
}
</code></pre>
<h2 id="-error-handling-examples">üîß Error Handling Examples</h2>
<h3 id="robust-api-calls">Robust API Calls</h3>
<pre><code class="lang-csharp">public async Task&lt;T?&gt; SafeApiCallAsync&lt;T&gt;(Func&lt;Task&lt;T&gt;&gt; apiCall, int maxRetries = 3)
{
    for (int attempt = 1; attempt &lt;= maxRetries; attempt++)
    {
        try
        {
            return await apiCall();
        }
        catch (StravaApiException ex) when (ex.StatusCode == 429)
        {
            // Rate limit exceeded
            if (attempt &lt; maxRetries)
            {
                int delaySeconds = attempt * 2; // Exponential backoff
                await Task.Delay(delaySeconds * 1000);
                continue;
            }
            throw;
        }
        catch (StravaApiException ex) when (ex.StatusCode == 401)
        {
            // Token expired, try to refresh
            if (attempt &lt; maxRetries)
            {
                bool refreshed = await RefreshTokenAsync();
                if (refreshed)
                {
                    continue;
                }
            }
            throw;
        }
        catch (HttpRequestException ex)
        {
            // Network error
            if (attempt &lt; maxRetries)
            {
                await Task.Delay(1000 * attempt);
                continue;
            }
            throw;
        }
    }
    
    throw new InvalidOperationException(&quot;Max retries exceeded&quot;);
}

// Usage
var activities = await SafeApiCallAsync(() =&gt; 
    Activities.GetAthletesActivitiesAsync(accessToken)
);
</code></pre>
<h3 id="batch-processing">Batch Processing</h3>
<pre><code class="lang-csharp">public async Task ProcessActivitiesInBatchesAsync(
    string accessToken, 
    Func&lt;SummaryActivity, Task&gt; processor,
    int batchSize = 50)
{
    int page = 1;
    bool hasMoreActivities = true;
    
    while (hasMoreActivities)
    {
        try
        {
            var activities = await Activities.GetAthletesActivitiesAsync(
                accessToken, 
                page: page, 
                perPage: batchSize
            );
            
            if (activities.Count == 0)
            {
                hasMoreActivities = false;
                break;
            }
            
            // Process activities in parallel
            var tasks = activities.Select(processor);
            await Task.WhenAll(tasks);
            
            page++;
        }
        catch (StravaApiException ex)
        {
            Console.WriteLine($&quot;Error processing batch {page}: {ex.Message}&quot;);
            page++; // Skip this batch and continue
        }
    }
}

// Usage
await ProcessActivitiesInBatchesAsync(accessToken, async activity =&gt;
{
    Console.WriteLine($&quot;Processing: {activity.Name}&quot;);
    // Your processing logic here
    await Task.Delay(100); // Rate limiting
});
</code></pre>
<h2 id="-real-world-applications">üéØ Real-World Applications</h2>
<h3 id="fitness-dashboard">Fitness Dashboard</h3>
<pre><code class="lang-csharp">public class FitnessDashboard
{
    public async Task&lt;DashboardData&gt; GetDashboardDataAsync(string accessToken)
    {
        var dashboard = new DashboardData();
        
        // Get recent activities
        var recentActivities = await Activities.GetAthletesActivitiesAsync(
            accessToken, 
            perPage: 10
        );
        
        dashboard.RecentActivities = recentActivities;
        
        // Calculate weekly stats
        var weeklyStats = await GetActivityStatsAsync(accessToken, 7);
        dashboard.WeeklyStats = weeklyStats;
        
        // Get personal records
        var personalRecords = await FindPersonalRecordsAsync(accessToken);
        dashboard.PersonalRecords = personalRecords;
        
        return dashboard;
    }
}
</code></pre>
<h3 id="training-plan-generator">Training Plan Generator</h3>
<pre><code class="lang-csharp">public class TrainingPlanGenerator
{
    public async Task&lt;TrainingPlan&gt; GeneratePlanAsync(
        string accessToken, 
        string goal, 
        int weeks)
    {
        var plan = new TrainingPlan { Goal = goal, DurationWeeks = weeks };
        
        // Analyze current fitness level
        var recentStats = await GetActivityStatsAsync(accessToken, 30);
        
        // Generate weekly targets based on goal and current fitness
        for (int week = 1; week &lt;= weeks; week++)
        {
            var weeklyTarget = new WeeklyTarget
            {
                Week = week,
                TargetDistance = CalculateTargetDistance(recentStats, goal, week),
                TargetTime = CalculateTargetTime(recentStats, goal, week),
                ActivityTypes = GetRecommendedActivities(goal, week)
            };
            
            plan.WeeklyTargets.Add(weeklyTarget);
        }
        
        return plan;
    }
}
</code></pre>
<h2 id="-more-examples">üìö More Examples</h2>
<ul>
<li><strong>[API Reference]({{ '/api/' | relative_url }})</strong> - Complete method documentation</li>
<li><strong>[Authentication Guide]({{ '/articles/authentication/' | relative_url }})</strong> - OAuth examples</li>
<li><strong>[Getting Started]({{ '/articles/getting-started/' | relative_url }})</strong> - Basic setup</li>
</ul>
<hr>
<p><strong>Have a specific use case? Check our API reference or create an issue on GitHub! üí°</strong></p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Deltatoolbox/StravaAPILibary/blob/master/docs/articles/examples.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
